<!doctype html>
<html>
<head>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>


<h1>Next-Exam</h1>
<p>Please chose the exam server you want to join</p>
<div id="container">
    <div id="list" class="placeholder"></div>
</div>


<script>


async function registerClient(){
    await fetch("http://localhost:3000/server/registerclient/1234")
       .then( response => response.json() )
       .then( data => {
            let html = "";
            document.getElementById("list").innerHTML = JSON.stringify(data);
    });
}




async function getData(){
    await fetch("http://localhost:3000/client/")
       .then( response => response.json() )
       .then( data => {
            let html = "";
            data.forEach( row => {
                html += `<div class=examinstance onclick="registerClient()">
                            Name: ${row.servername} <br>  
                            Last seen: ${row.timestamp}  <br>  
                            Id: ${row.id} 
                        </div>`;
            });
            document.getElementById("list").innerHTML = html;
    });
}
getData();


setInterval(() => {
    getData()
}, 2000)


</script>
</body>
</html>
